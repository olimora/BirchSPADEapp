#
# This is the user-interface definition of a Shiny web application. You can
# run the application by clicking 'Run App' above.
#
# Find out more about building applications with Shiny here:
# 
#    http://shiny.rstudio.com/
#

library(shiny)
library(shinyjs)

tweaks <- 
  list(tags$head(tags$style(HTML("
                                 .multicol { 
                                   -webkit-column-count: 5; /* Chrome, Safari, Opera */ 
                                   -moz-column-count: 5;    /* Firefox */ 
                                   column-count: 5; 
                                   -moz-column-fill: auto;
                                   -column-fill: auto;
                                   padding-bottom: 20px
                                 } 
                                 "))),
       tags$head(
         tags$style(HTML('#run_spade{background-color:#66ccff}'))
       )
  )

# Define UI for application that draws a histogram
shinyUI(fluidPage(tweaks,
                  
  # Application title
  titlePanel("SPADE"),
  
  selectInput("file", "File", choices = NULL, selected = NULL, multiple = FALSE,
              selectize = TRUE, width = '50%', size = NULL),
  
  tags$div(align = 'left', 
           class = 'multicol', 
           checkboxGroupInput("markers", label = "Clustering markers", 
                     choices = NULL)),
  
  
  # h4("Downsampling settings"),
  column(4, radioButtons("downsampl_target_option", "Downsampling target option", inline = T, 
                         choices = c("Percentile" = "pctile",
                                     "Percentage" = "perc", 
                                     "Number" = "num")),
         
         numericInput("downsampl_target", label = "Target percentile",
                      value = 0.03, step = 0.01)),
  
  column(4, numericInput("downsampl_exclude", label = "Exclude percentile (outliers)",
                         value = 0.01, step = 0.005),
         
         numericInput("clust_num", "Number of clusters", value = 200, min = 0, max = 500)),
  
  textInput("output_name", "Name of output folder", width = "50%"),
  
  useShinyjs(),
  actionButton("run_spade", "Run SPADE"),
  
  textInput("status_info", "SPADE status:", width = "50%")
))
